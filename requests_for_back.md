# 18.05.2019
## Вход партнера
#### Request: `url: /provider_log_in`, `method: POST`
```
{
    email: "wordl.class@gmail.com", //почта зарегестрированного партнера
    password: "***" //его пароль
}
```
#### Response:
В случае успеха - страничка (потом вместе сделаем). В случае ошибки: сообщение об
ошибке: "Логин или пароль неверный".

## Дальнейшие запросы идут от залогиненного пользователя

## Логика сообщений:
Сообщения объединяем в обсуждения: user <-> provider. Когда отправляется новое сообщения от пользователя, 
его неоьходимо добавить в нужное обсуждение, а потом когда нужно подгрузить сообщения, нужно сгруппировать все 
по обсуждениям (смотри сначала запросы, а потом возвращайся сюда, если будет непонятно).

## Отправка нового сообщения:
#### Reuest: `url: /new_message`, `method: POST`
```
{
    to: "wordlclass@gamil.com",   //кому адресовано сообщение (почта партнера или юзера)
    message: "Вот такое сообщение"  //сам текст сообщения
}
```
#### Response:
Просто код 200 если все прошло успешно и код ошибки, если что-то пошло не так

## Получение информации о пользователе
#### Request: `url: /get_user_info`, `method: GET`
#### Response:
```
{
    name: "Никита",
    phone: "+79153939881",
    email: "sikalov.ns@phystech.edu" 
}
```
## Получение информации о хобби пользователя
#### Request: `url: /get_user_hobbies`, `method: GET`
#### Response:
Ответ в виде массива хобби со всей ей соответсвующей информацией. (Такой ответ уже был похожий ранее у партнера)
```
[
    {
        name: "Stretching",
        phone: "7925234534",
        email: "world.class@gmail.com",
        site: "https://www.worldclass.ru/",
        provider: "World Class",
        address: {
            metro: "Парк культуры",
            precise_address: "БЦ \"Морозов\" "
        },
        users_rate: {
            rate: 4.8,
            number_estimators: 200
        },
        additional_information: "Подвид фитнеса, который включает упражнения, " +
            "способствующие растяжению мышц и связок, называют стретчингом. Используют его в качестве отдельного направления и как дополнение " +
            "к основному спортивному комплексу фитнеса или аэробики. Выясняя, что такое стретчинг в фитнесе, следует " +
            "указать, что это направление используют для подготовки профессиональных спортсменов и включается в " +
            "оздоровительную и лечебную гимнастику. Эта дисциплина подразумевает чередование напряжения и расслабления мышц, " +
            "что поможет быстро снять напряжение и восстановить силы.\n",

        about_provider: "Сеть фитнес-клубов премиум класса World Class — лидер индустрии " +
            "в сегментах «люкс» и «премиум». Быть членом клуба World Class — значит, получить доступ к " +
            "неограниченным возможностям фитнеса премиум класса: посещение групповых программ, тренажерного зала, " +
            "бассейна, SPA-салонов, а также участию в светских и спортивных мероприятиях, тренировках на свежем " +
            "воздухе и даже путешествиях.",
        feedback: [
            {
                from: "Никита",
                text: ".Net потратный предмет. Попробую пропустить сем в следующий раз"
            }
        ]
    }
]
```
## Получение сообщений 
#### Request: `url: /get_messages`, `method: GET`
#### Response:
```
{
    [
        provider: {
            name: "WorldClass",
            email: "world.class@gmail.com"
        },
        user: "Никита",
        messages: 
        [
            {
                sender: "Никита",
                text: "Сколько стоит одно занятие?"
            }
        ]
    ]
}
```

## Оставить отзыв
#### Request: `url: /push_feedback`, `method: POST`
```
{
    text: "Все круто! Мне здесь очень понравилось",
    provider: "company@gmail.com",
    hobby_name: "Теннис"
}
```
#### Response:
Код 200, если все прошло удачно. И другой код, если произошла какая-то ошибка.

## Получить оценку данного пользователя
#### Request: `url: /get_mark`, `method: POST`
```
{
    provider: "compony@compony.com",
    hobby_name: "Теннис"
}
```
#### Response:
```
{
    mark: 2    // число от 0 до 5
}
```

## Оценить хобби
#### Request: `url: /estimate_hobby`, `method: POST`
```
{
    mark: 3,  //число от 0 до 5
}
```
#### Response:
У юзера есть возможно только один раз оценить конкретное хобби. Поэтому если видим, что юзер 
пытается еще раз поставить оценку, то просто изменяем тогда старую оценку на новую присланную

## Добавление хобби в свой личный кабинет
#### Request: `url: /add_hobby`, `method: POST`
```
{
    provider: "Compony",   //вот здесь прям обратить внимание! что передается именно имя, а не почта партнера
    email: "lalala@gmail.com",      
    hobby_name: "Stretching"     //название хобби
}
```
#### Response: 
Просто код результата